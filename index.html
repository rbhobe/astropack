<!DOCTYPE html>
<html>
  <head>
    <title>Astropack</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="css/matte-pack.css">
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
  </head>
  <body>
    <div class="container">
    	
    	<h1>Ski Trip</h1>

    	<h3>To Pack</h3>
		<form id="to-pack">
		</form>

		<h3>Packed</h3>
		<form id="packed">
		</form>

	<script type="text/javascript">



		
		$(document).ready(function() {
		   
		   // all items start as unpacked
		   var items = {};
		   items['gear'] = ['snowpants', 'gloves'];
		   items['toiletries'] = ['toothbrush', 'gel', 'toothpaste'];

		   function getItemMarkup(item) {
		   		return "<tr><td><label class='checkbox'><input type='checkbox' id='"+item+"' class='list-item'> "+item+"</label></td></tr>";
		   }

		   function getSectionMarkup(sectionName, sectionItems) {

		   		var openSectionMarkup = "<table class='table table-condensed list "+sectionName+"'><thead><tr><th>"+sectionName+"</th></tr></thead><tbody>";

		    	var itemMarkup = "";
		    	for(var key in sectionItems) {
		    		itemMarkup += getItemMarkup(sectionItems[key]);
		    	}
		
		    	closeSectionMarkup = "</tbody></table>";

		    	return openSectionMarkup + itemMarkup + closeSectionMarkup;

			}

			for (var section in items) {
				var sectionMarkup = getSectionMarkup(section, items[section]);
				console.log(sectionMarkup);
				$("#to-pack").append($(sectionMarkup));
			}

		   // observe all to pack items
		   $("#to-pack .list-item").click(function(event) {
		     alert("packed "+$(event.target).parents("label").text().trim());
		   });




		   // observe all packed items
		   $("#packed .list-item").click(function(event) {
		     alert("unpacked "+$(event.target).parents("label").text().trim());
		   });


		});

		
		// when an item is packed, move it down to the packed section
		// if the subsection does not exist in packed, create it
		// if the subsection in to pack is empty, remove it
		// if all items are packed, celebrate

		
		// when an item is unpacked, move it up to the to pack section
		// if the subsection does not exist in packed, create it
		// if the subsection in packed is empty, remove it
		// if all items are unpacked, sad face

	</script>

  </body>
</html>
